/*! bed.js v1.0 | (c) 2014, Kimerran.com (https://github.com/kimerran/bed.js)
*/
function Bed(e){this.__capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};this.__pathPreparePost=function(e,t){var n=/(:\w*)/mg;var r;while((r=n.exec(e))!=null){e=e.replace(r[0],t[r[0].slice(1)])}return e};this.__pathPrepareGet=function(e,t){e+="?";for(var n in t){e+=n+"="+t[n]+"&"}return e.slice(0,-1)};this.__createRequest=function(t,n,r){var i=new XMLHttpRequest;n=e.host+n;i.open(t,n,true);if(t=="POST"){i.setRequestHeader("Content-type","application/json")}i.onreadystatechange=function(){if(this.readyState==4){var e={content:JSON.parse(i.responseText),req:i,status:i.status};r(e)}};return i};this.__createMethodName=function(n,r){var i;var s=e;var o=s.separator||"";switch(s.convention||""){case"CamelCase":i=n+o+t.__capitalize(r);break;case"PascalCase":i=t.__capitalize(n)+o+t.__capitalize(r);break;default:i=n+o+r}return i};this.__error=function(e){throw new Error(e)};var t=this;t.$g=function(e,n,r){e=t.__pathPrepareGet(e,n);var i=t.__createRequest("GET",e,r);i.send()};t.$p=function(e,n,r){e=t.__pathPreparePost(e,n);var i=t.__createRequest("POST",e,r);i.send(JSON.stringify(n))};t.$d=function(e,t,n){};t.cfg=e;if(!t.cfg.host)t.__error("MISSING bedcfg.host");var n=t.cfg.host;var r=this.cfg.controllers||[];r.forEach(function(e,r,i){var s=e.name;e.actions.forEach(function(e){var r=t.__createMethodName(s,e);t.$g[r]=function(r,i){var o=n+"/"+s+"/"+e;o=t.__pathPrepareGet(o,r);var u=t.__createRequest("GET",o,i);u.send()};t.$p[r]=function(r,i){var o=n+"/"+s+"/"+e;var u=t.__createRequest("POST",o,i);u.send(JSON.stringify(r))}})})}var bed={config:function(e){bed=new Bed(e)}};window.bed=bed